<VirtualHost *:80>
    ServerName app.louisplace.com
    ServerAlias www.app.louisplace.com
    
    ProxyPreserveHost On
    ProxyPass / http://app:3000/
    ProxyPassReverse / http://app:3000/
    
    ErrorLog logs/error.log
    CustomLog logs/access.log combined
</VirtualHost>
<VirtualHost *:443>
    ServerName app.louisplace.com
    ServerAlias www.app.louisplace.com
    
    # SSL Configuration
    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/app.louisplace.com/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/app.louisplace.com/privkey.pem
    
    # Modern SSL configuration
    SSLProtocol all -SSLv3 -TLSv1 -TLSv1.1
    SSLCipherSuite ECDHE+AESGCM:ECDHE+AES256:ECDHE+AES128:!aNULL:!MD5:!DSS
    SSLHonorCipherOrder on
    
    # Proxy configuration
    ProxyPreserveHost On
    ProxyPass / http://app:3000/
    ProxyPassReverse / http://app:3000/
    
    # Headers for better security
    Header always set Strict-Transport-Security "max-age=63072000; includeSubDomains; preload"
    Header always set X-Content-Type-Options nosniff
    Header always set X-Frame-Options DENY
    Header always set X-XSS-Protection "1; mode=block"
    
    ErrorLog logs/error.log
    CustomLog logs/access.log combined
</VirtualHost>